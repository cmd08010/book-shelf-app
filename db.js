const pg = require("pg")
const { Client } = pg
const uuid = require("uuid/v4")
const client = new Client("postgres://localhost/book_shelf")

client.connect()

const sync = async () => {
  const SQL = `
   CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
  DROP TABLE IF EXISTS books;
  DROP TABLE IF EXISTS authors;
  CREATE TABLE authors
  (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name VARCHAR NOT NULL,
    date_create TIMESTAMP default CURRENT_TIMESTAMP
  );
  CREATE TABLE books
  (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    title VARCHAR NOT NULL,
    author_id UUID references authors(id),
    description VARCHAR DEFAULT 'mystery story about a ghost and his friends',
    read VARCHAR DEFAULT 'false',
    book_cover VARCHAR DEFAULT 'https://thumbs-prod.si-cdn.com/c0VP9nb5bbooVSqQEjHk3q9S35c=/800x600/filters:no_upscale()/https://public-media.si-cdn.com/filer/91/91/91910c23-cae4-46f8-b7c9-e2b22b8c1710/lostbook.jpg',
    date_create TIMESTAMP default CURRENT_TIMESTAMP
  );
  INSERT INTO authors (name) VALUES ('JK Rowling');
  INSERT INTO books (title, author_id, book_cover, description) VALUES ('Harry Potter and the Philosophers Stone', (SELECT id FROM authors WHERE name = 'JK Rowling'), 'https://images-na.ssl-images-amazon.com/images/I/81YOuOGFCJL.jpg','The first novel in the fantasy series, Harry Potter. It follows Harry Potter, a young wizard who discovers his magical heritage on his eleventh birthday, when he receives a letter of acceptance to Hogwarts School of Witchcraft and Wizardry.');
  INSERT INTO authors (name) VALUES ('Brandon Sanderson');
  INSERT INTO books (title, author_id, description) VALUES ('The Way of Kings', (SELECT id FROM authors WHERE name = 'Brandon Sanderson'), 'Shallan, a minor lighteyes woman whose family and lands are in danger, hatches a daring plot to switch a broken Soulcaster (a device that allows people to change objects to other things) with a working one belonging to Jasnah Kholin, sister of the Alethi King.');



  INSERT INTO books (title, author_id, description, book_cover ) VALUES ('Harry Potter and the Order of the Phoenix', (SELECT id FROM authors WHERE name = 'JK Rowling'), 'Description for HP', 'https://prodimage.images-bn.com/pimages/9780439358071_p1_v3_s550x406.jpg');


  INSERT INTO authors (name) VALUES ('Harper Lee');

  INSERT INTO books (title, author_id, description, book_cover) VALUES ('To kill a mockingbird', (SELECT id FROM authors WHERE name = 'Harper Lee'), 'Description for TKAM', 'https://upload.wikimedia.org/wikipedia/commons/4/4f/To_Kill_a_Mockingbird_%28first_edition_cover%29.jpg');

  INSERT INTO authors (name) VALUES ('J.R.R. Tolkien');

  INSERT INTO books (title, author_id, description, book_cover) VALUES ('The Lord of the Rings', (SELECT id FROM authors WHERE name = 'J.R.R. Tolkien'), 'Description for LOTR', 'https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcS0KlKyFbcNPG7rXNSRe0jhk6glM8nc1f87kblgf9uYIQClZMsg');

  INSERT INTO authors (name) VALUES ('George R.R. Martin');

  INSERT INTO books (title, author_id, description, book_cover) VALUES ('Game of thrones', (SELECT id FROM authors WHERE name = 'George R.R. Martin'), 'Description for GOT', 'data:image/jpeg;base64,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');



  INSERT INTO books (title, author_id, description) VALUES ('Harry Potter and the Chamber of Secrets', (SELECT id FROM authors WHERE name = 'JK Rowling'), 'Description for HP');

  INSERT INTO authors (name) VALUES ('Antoine de Saint-Exupery');

  INSERT INTO books (title, author_id, description, book_cover) VALUES ('Little Prince', (SELECT id FROM authors WHERE name = 'Antoine de Saint-Exupery'), 'https://kbimages1-a.akamaihd.net/4943adbb-d0c5-46e7-847a-8a001bbe14b4/1200/1200/False/the-little-prince-37.jpg', 'Description for LP');



  INSERT INTO books (title, author_id, description) VALUES ('Harry Potter and the Prisoner of Azkaban', (SELECT id FROM authors WHERE name = 'JK Rowling'), 'Description for HP');


  `
  await client.query(SQL)
}

//Authors
const getAuthors = async () => {
  const SQL = `
  SELECT * FROM authors
  `
  const response = await client.query(SQL)
  return response.rows
}

const getAuthor = async name => {
  const SQL = `
  SELECT * FROM authors WHERE name=$1
  `
  const response = await client.query(SQL, [name])
  return response.rows[0]
}

const getAuthorById = async id => {
  const SQL = `
  SELECT * FROM authors where id = $1
  `
  const response = await client.query(SQL, [id])
  console.log(response.rows)
  return response.rows
}

const createAuthor = async name => {
  const SQL = `
  INSERT INTO authors (name) VALUES ($1)
  returning *
  `
  const response = await client.query(SQL, [name])

  return response.rows[0]
}

const deleteAuthor = async id => {
  console.log(id, "my id for authorx")
  const SQL = `
  DELETE FROM books WHERE author_id = $1;
  `

  const SQL_Two = `
  DELETE FROM authors WHERE id = $1`
  const response = await client.query(SQL, [id])
  await client.query(SQL_Two, [id])
  console.log(response, "my response")
  return response.rows
}

//Books
const getBooks = async () => {
  const SQL = `
  SELECT * FROM books
  `
  const response = await client.query(SQL)

  return response.rows
}

const getBookTitle = async title => {
  const SQL = `
  SELECT * FROM books WHERE title = $1
  `
  const response = await client.query(SQL, [title])
  return response.rows
}

const getBook = async author => {
  const SQL = `
  SELECT * FROM books WHERE author_id IN (select id from authors where $1 = name)
  `
  const response = await client.query(SQL, [author])

  return response.rows
}

const getBookByAuthorID = async author_id => {
  const SQL = `
  SELECT * FROM books WHERE author_id = $1
  `
  const response = await client.query(SQL, [author_id])
  return response.rows
}

const createBook = async (author, name, description) => {
  const SQL = `
  INSERT INTO books(title, author_id, description) VALUES ($1, (SELECT id FROM authors WHERE name = $2), $3)
  returning *
  `

  const response = await client.query(SQL, [name, author, description])
  return response.rows[0]
}

const deleteBook = async id => {
  const SQL = `
  DELETE FROM books WHERE id = $1

  `
  const response = await client.query(SQL, [id])

  return response.rows
}

module.exports = {
  sync,
  getAuthors,
  getBooks,
  getAuthor,
  getBook,
  getAuthorById,
  getBookByAuthorID,
  createAuthor,
  createBook,
  getBookTitle,
  deleteAuthor,
  deleteBook
}
